# CONCEPT 24: secrets Context (secrets.*)
# WHY: Store sensitive data (API keys, passwords) securely.
#      Accessed via secrets.SECRET_NAME in workflows.

name: 24 - Secrets Context Demo

on:
  workflow_dispatch:

jobs:
  secrets-demo:
    runs-on: ubuntu-latest
    steps:
      - name: How to use secrets
        env:
          # Proper way - assign secret to env var
          MY_SECRET: ${{ secrets.MY_TEST_SECRET }}
        run: |
          echo "üîê SECRETS CONTEXT DEMO"
          echo ""
          echo "To test this workflow:"
          echo "1. Go to Settings ‚Üí Secrets and variables ‚Üí Actions"
          echo "2. Click 'New repository secret'"
          echo "3. Name: MY_TEST_SECRET"
          echo "4. Value: any-secret-value-123"
          echo "5. Re-run this workflow"
          echo ""
          if [ -z "$MY_SECRET" ]; then
            echo "‚ö†Ô∏è MY_TEST_SECRET is not set (empty)"
            echo "   Please add the secret first!"
          else
            echo "‚úÖ Secret is configured and accessible!"
            echo "   Length of secret: ${#MY_SECRET} characters"
          fi
      
      - name: Built-in GITHUB_TOKEN secret
        run: |
          echo "üìå GITHUB_TOKEN is a special built-in secret"
          echo ""
          echo "It's automatically available as:"
          echo "  secrets.GITHUB_TOKEN"
          echo ""
          echo "Used for:"
          echo "  - GitHub API calls"
          echo "  - Pushing to repos"
          echo "  - Creating releases"
          echo "  - And more..."
        env:
          # This always exists, no setup needed
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

# üìå SETUP: Add a secret named MY_TEST_SECRET in repo settings
# üìå OBSERVE: Secrets are accessed via secrets.NAME
# üìå MCQ TIP: secrets context, not env context for sensitive data
