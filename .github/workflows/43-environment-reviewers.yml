# CONCEPT 43: Environment with Required Reviewers
# WHY: Protect deployments to critical environments (production).
#      Require human approval before deployment proceeds.

name: 43 - Environment Required Reviewers Demo

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Build application
        run: |
          echo "ðŸ”¨ Building application..."
          echo "Build complete!"

  deploy-staging:
    needs: build
    runs-on: ubuntu-latest
    environment: staging  # No protection rules typically
    steps:
      - name: Deploy to staging
        run: |
          echo "ðŸš€ Deploying to STAGING..."
          echo "Staging deployment complete!"

  deploy-production:
    needs: deploy-staging
    runs-on: ubuntu-latest
    environment: production  # Configure with required reviewers!
    steps:
      - name: Deploy to production
        run: |
          echo "ðŸš€ Deploying to PRODUCTION..."
          echo "Production deployment complete!"

# ðŸ“Œ SETUP REQUIRED:
# 1. Go to Settings â†’ Environments
# 2. Click "New environment" â†’ Name: "production"
# 3. Check "Required reviewers"
# 4. Add yourself as reviewer
# 5. Click "Save protection rules"
# 6. Run this workflow
#
# ðŸ“Œ OBSERVE: Workflow pauses at deploy-production
# ðŸ“Œ OBSERVE: Yellow "Waiting" status appears
# ðŸ“Œ OBSERVE: Reviewer gets notification to approve
# ðŸ“Œ MCQ TIP: Environment protection rules require setup in repo settings
