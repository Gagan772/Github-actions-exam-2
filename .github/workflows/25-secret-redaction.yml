# CONCEPT 25: Secret Redaction in Logs
# WHY: GitHub automatically hides secret values in logs.
#      Even if you accidentally echo a secret, it shows as ***.

name: 25 - Secret Redaction Demo

on:
  workflow_dispatch:

jobs:
  redaction-demo:
    runs-on: ubuntu-latest
    steps:
      - name: Setup - explain the demo
        run: |
          echo "üîê SECRET REDACTION DEMO"
          echo ""
          echo "SETUP REQUIRED:"
          echo "1. Go to Settings ‚Üí Secrets ‚Üí Actions"
          echo "2. Create secret: DEMO_API_KEY = 'super-secret-key-12345'"
          echo "3. Re-run this workflow"
          echo "4. Watch the logs - secret will be hidden!"
      
      - name: Demonstrate redaction
        env:
          API_KEY: ${{ secrets.DEMO_API_KEY }}
        run: |
          echo "Attempting to print the secret..."
          echo ""
          
          if [ -z "$API_KEY" ]; then
            echo "‚ö†Ô∏è Secret not configured yet."
            echo "   Add DEMO_API_KEY secret and re-run."
            echo ""
            echo "Simulating with fake secret:"
            echo "If secret was 'abc123', you would see: ***"
          else
            echo "Here's what happens when you echo a secret:"
            echo "API_KEY = $API_KEY"
            echo ""
            echo "‚òùÔ∏è Did you see '***' above? That's redaction!"
            echo ""
            echo "Even in complex strings:"
            echo "The key is [$API_KEY] in brackets"
            echo "Concatenated: prefix-$API_KEY-suffix"
          fi

# üìå OBSERVE: Secret values show as *** in logs
# üìå OBSERVE: GitHub detects the secret pattern anywhere in output
# üìå MCQ TIP: Redaction happens automatically - no config needed
